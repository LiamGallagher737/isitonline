!function(){var e;function t(e){return new EventSource(e,{withCredentials:!0})}function n(e){return e.trim().split(/\s+/)}function r(t){if(!e.bodyContains(t)){var n=e.getInternalData(t).sseEventSource;if(void 0!=n)return n.close(),!0}return!1}function s(t,n){var r=[];return(e.hasAttribute(t,n)||e.hasAttribute(t,"hx-sse"))&&r.push(t),t.querySelectorAll("["+n+"], [data-"+n+"], [hx-sse], [data-hx-sse]").forEach(function(e){r.push(e)}),r}function a(t,n){e.withExtensions(t,function(e){n=e.transformResponse(n,null,t)});var r=e.getSwapSpecification(t),s=e.getTarget(t),a=e.makeSettleInfo(t);e.selectAndSwap(r.swapStyle,s,t,n,a),a.elts.forEach(function(t){t.classList&&t.classList.add(htmx.config.settlingClass),e.triggerEvent(t,"htmx:beforeSettle")}),r.settleDelay>0?setTimeout(i(a),r.settleDelay):i(a)()}function i(t){return function(){t.tasks.forEach(function(e){e.call()}),t.elts.forEach(function(t){t.classList&&t.classList.remove(htmx.config.settlingClass),e.triggerEvent(t,"htmx:afterSettle")})}}htmx.defineExtension("sse",{init:function(n){e=n,void 0==htmx.createEventSource&&(htmx.createEventSource=t)},onEvent:function(t,i){switch(t){case"htmx:beforeCleanupElement":var o=e.getInternalData(i.target);o.sseEventSource&&o.sseEventSource.close();return;case"htmx:afterProcessNode":!function t(i,o){if(null==i)return null;var u=e.getInternalData(i),c=e.getAttributeValue(i,"sse-connect");if(void 0==c){var l=function t(r){var s=e.getAttributeValue(r,"hx-sse");if(s)for(var a=n(s),i=0;i<a.length;i++){var o=a[i].split(/:(.+)/);if("connect"===o[0])return o[1]}}(i);if(!l)return null;c=l}var f=htmx.createEventSource(c);u.sseEventSource=f,f.onerror=function(n){if(e.triggerErrorEvent(i,"htmx:sseError",{error:n,source:f}),!r(i)&&f.readyState===EventSource.CLOSED){var s=Math.random()*(2^(o=o||0))*500;window.setTimeout(function(){t(i,Math.min(7,o+1))},s)}},f.onopen=function(t){e.triggerEvent(i,"htmx:sseOpen",{source:f})},s(i,"sse-swap").forEach(function(t){var s=e.getAttributeValue(t,"sse-swap");if(s)var o=s.split(",");else var o=function t(r){var s=e.getAttributeValue(r,"hx-sse"),a=[];if(s)for(var i=n(s),o=0;o<i.length;o++){var u=i[o].split(/:(.+)/);"swap"===u[0]&&a.push(u[1])}return a}(t);for(var u=0;u<o.length;u++){var c=o[u].trim(),l=function(n){if(r(i)){f.removeEventListener(c,l);return}a(t,n.data),e.triggerEvent(i,"htmx:sseMessage",n)};e.getInternalData(i).sseEventListener=l,f.addEventListener(c,l)}}),s(i,"hx-trigger").forEach(function(t){var n=e.getAttributeValue(t,"hx-trigger");if(null!=n&&"sse:"==n.slice(0,4)){var s=function(e){if(r(i)){f.removeEventListener(n,s);return}htmx.trigger(t,n,e),htmx.trigger(t,"htmx:sseMessage",e)};e.getInternalData(i).sseEventListener=s,f.addEventListener(n.slice(4),s)}})}(i.target)}}})}();